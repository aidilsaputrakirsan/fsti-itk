import{c,o as l,a as t,d as V,r as p,p as _,q as C,s as H,x as N,e as D,i as r,k as B,j as i,f as o,l as b,b as T,v as z,g as L,F as h,y as M,t as d,z as F,n as I}from"./app-B26E56ET.js";import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CnoWgKJS.js";import{l as U}from"./lodash-BYLeXENt.js";import{r as Z,a as q,b as J,c as O,d as P,e as Y}from"./TrashIcon-BAptgQ8z.js";import{r as G}from"./PencilSquareIcon-DlzesHkv.js";function Q(y,n){return l(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const R={class:"flex items-start justify-between mb-8"},W={class:"flex items-center justify-between gap-4 mb-6"},X={class:"relative flex-grow"},tt={class:"relative flex-shrink-0"},et={class:"bg-white shadow-sm p-6 rounded-lg"},st={class:"border rounded-lg overflow-x-auto"},at={class:"w-full min-w-full"},ot={class:"divide-y divide-gray-200"},lt={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-black"},nt={class:"whitespace-nowrap px-6 py-4 text-sm"},rt={class:"rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-800"},it={class:"whitespace-nowrap px-6 py-4 text-sm text-black"},dt={class:"whitespace-nowrap px-6 py-4 text-sm"},ct={class:"rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-800"},pt={class:"whitespace-nowrap px-6 py-4 text-sm text-black"},ut={class:"flex items-center gap-2"},xt={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},ft={class:"flex items-center gap-2"},mt=["onClick"],gt={key:1},bt={class:"flex items-center justify-between mt-4"},ht={key:0,class:"text-sm text-black"},yt={class:"font-medium"},wt={class:"font-medium"},vt={class:"font-medium"},kt={key:1},_t={class:"flex items-center gap-1"},Ct={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Dt={class:"w-full max-w-md rounded-lg bg-white p-8 shadow-2xl"},Bt={class:"flex flex-col items-center text-center"},Tt={class:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100"},Mt={class:"mt-2 text-gray-600"},jt={class:"font-semibold"},St={key:1,class:"fixed top-5 right-5 z-50 transition-transform duration-300 ease-in-out"},$t={class:"flex items-center gap-4 rounded-lg bg-green-600 p-4 text-white shadow-lg"},At={class:"font-semibold"},Lt=V({layout:K,__name:"Index",props:{posts:{},filters:{}},setup(y){const n=y,x=p(n.filters.search),f=p(n.filters.status||"");_([x,f],U.throttle(function([a,e]){C.get(route("admin.posts.index"),{search:a,status:e===""?null:e},{preserveState:!0,replace:!0})},300));const m=p(!1),u=p(null),j=a=>{u.value=a,m.value=!0},w=()=>{m.value=!1,u.value=null},S=()=>{u.value&&C.delete(route("admin.posts.destroy",u.value.id),{onSuccess:()=>w()})},$=H(),g=p(!1),v=p(""),A=N(()=>$.props.flash?.success);_(A,a=>{a&&(v.value=a,g.value=!0,setTimeout(()=>{g.value=!1},3e3))},{immediate:!0});const E=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"});return(a,e)=>(l(),c(h,null,[t("div",null,[t("div",R,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-3xl font-bold text-black"},"Kelola Berita"),t("p",{class:"mt-1 text-black"},"Manajemen konten berita untuk website Fakultas Sains dan Teknologi Institut Teknologi Kalimantan")],-1)),r(o(b),{href:a.route("admin.posts.create"),class:"flex items-center gap-2 rounded-lg bg-[#4682A9] px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-opacity-90 flex-shrink-0"},{default:B(()=>[r(o(Z),{class:"h-5 w-5"}),e[2]||(e[2]=i(" Tambah Berita ",-1))]),_:1},8,["href"])]),t("div",W,[t("div",X,[r(o(q),{class:"pointer-events-none absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-400"}),T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),type:"text",placeholder:"Cari Berita",class:"w-full rounded-lg border-gray-300 py-3 pl-11 pr-4 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[z,x.value]])]),t("div",tt,[r(o(J),{class:"pointer-events-none absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-500"}),T(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),class:"w-full rounded-lg border border-gray-300 bg-white py-3 pl-11 pr-10 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[...e[4]||(e[4]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"Terbitkan"},"Terbitkan",-1),t("option",{value:"Draft"},"Draft",-1)])],512),[[L,f.value]])])]),t("div",et,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-black mb-4"},"Daftar Berita",-1)),t("div",st,[t("table",at,[e[9]||(e[9]=t("thead",{class:"bg-[#CBDCEB]"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Judul"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Kategori"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Tanggal"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Status"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Views"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider text-black"},"Aksi")])],-1)),t("tbody",ot,[n.posts.data.length>0?(l(!0),c(h,{key:0},M(n.posts.data,s=>(l(),c("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",lt,d(s.title),1),t("td",nt,[t("span",rt,d(s.category),1)]),t("td",it,d(E(s.created_at)),1),t("td",dt,[t("span",ct,d(s.status),1)]),t("td",pt,[t("span",ut,[r(o(Q),{class:"h-4 w-4"}),i(" "+d(s.views),1)])]),t("td",xt,[t("div",ft,[r(o(b),{href:a.route("admin.posts.edit",s.id),class:"flex items-center gap-1 text-[#4682A9] hover:opacity-80"},{default:B(()=>[r(o(G),{class:"h-4 w-4"}),e[5]||(e[5]=i(" Edit ",-1))]),_:2},1032,["href"]),e[7]||(e[7]=t("span",{class:"text-gray-300"},"|",-1)),t("button",{onClick:k=>j(s),type:"button",class:"flex items-center gap-1 text-[#DC645E] hover:opacity-80"},[r(o(Y),{class:"h-4 w-4"}),e[6]||(e[6]=i(" Hapus ",-1))],8,mt)])])]))),128)):(l(),c("tr",gt,[...e[8]||(e[8]=[t("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"Tidak ada berita yang cocok dengan pencarian Anda.",-1)])]))])])]),t("div",bt,[n.posts.total>0?(l(),c("p",ht,[e[10]||(e[10]=i(" Menampilkan ",-1)),t("span",yt,d(n.posts.from),1),e[11]||(e[11]=i(" sampai ",-1)),t("span",wt,d(n.posts.to),1),e[12]||(e[12]=i(" dari ",-1)),t("span",vt,d(n.posts.total),1),e[13]||(e[13]=i(" hasil ",-1))])):(l(),c("p",kt)),t("div",_t,[(l(!0),c(h,null,M(n.posts.links,(s,k)=>(l(),F(o(b),{key:k,href:s.url??"#",innerHTML:s.label,class:I(["px-3 py-1 text-sm rounded border border-gray-300",s.active?"bg-[#4682A9] text-white":"bg-[#CBDCEB] text-gray-800 hover:bg-opacity-80",s.url?"":"text-gray-400 cursor-not-allowed"])},null,8,["href","innerHTML","class"]))),128))])])])]),m.value?(l(),c("div",Ct,[t("div",Dt,[t("div",Bt,[t("div",Tt,[r(o(O),{class:"h-10 w-10 text-red-500"})]),e[18]||(e[18]=t("h2",{class:"text-2xl font-bold text-gray-800"},"Hapus Berita",-1)),t("p",Mt,[e[15]||(e[15]=i(" Apakah Anda yakin ingin menghapus berita ",-1)),e[16]||(e[16]=t("br",null,null,-1)),t("span",jt,'"'+d(u.value?.title)+'"',1),e[17]||(e[17]=i("? ",-1))])]),t("div",{class:"mt-8 flex justify-center gap-4"},[t("button",{onClick:w,class:"rounded-lg bg-gray-200 px-6 py-2 font-semibold text-gray-800 hover:bg-gray-300"}," Batal "),t("button",{onClick:S,class:"rounded-lg bg-red-600 px-6 py-2 font-semibold text-white hover:bg-red-700"}," Ya, Hapus ")])])])):D("",!0),g.value?(l(),c("div",St,[t("div",$t,[r(o(P),{class:"h-8 w-8"}),t("p",At,d(v.value),1)])])):D("",!0)],64))}});export{Lt as default};
