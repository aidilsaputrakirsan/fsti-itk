import{c as i,o as n,a as e,d as P,r as c,p as T,q as $,s as z,x as K,u as L,e as v,i as o,j as l,f as r,w as A,k as w,l as k,b as D,v as O,g as U,F as j,y as E,t as d,n as _,T as q,z as Y}from"./app-B26E56ET.js";import{_ as G}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CnoWgKJS.js";import{l as J}from"./lodash-BYLeXENt.js";import{r as Q,a as R,b as W,c as X,d as Z,e as ee}from"./TrashIcon-BAptgQ8z.js";import{r as te}from"./PencilSquareIcon-DlzesHkv.js";function se(m,p){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15M9 12l3 3m0 0 3-3m-3 3V2.25"})])}function ae(m,p){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}function oe(m,p){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}const le={class:"flex items-center justify-between mb-8"},re={class:"flex items-center gap-3 flex-shrink-0"},ne={class:"relative"},ie={class:"py-1"},de=["href"],ce=["href"],pe=["href"],ue={class:"flex items-center justify-between gap-4 mb-6"},me={class:"relative flex-grow"},fe={class:"relative flex-shrink-0"},xe={class:"bg-white shadow-sm p-6 rounded-lg"},ge={class:"border rounded-lg overflow-x-auto"},he={class:"w-full min-w-full"},ve={class:"divide-y divide-gray-200"},be={class:"whitespace-nowrap px-6 py-4 text-sm font-medium text-black"},ye={class:"whitespace-nowrap px-6 py-4 text-sm text-black"},we={class:"whitespace-nowrap px-6 py-4"},ke={class:"whitespace-nowrap px-6 py-4 text-sm text-black"},_e={class:"whitespace-nowrap px-6 py-4 text-sm text-black text-center"},Ce={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},Me={class:"flex items-center gap-2"},Be=["onClick"],Te={key:1},$e={class:"flex items-center justify-between mt-4"},Ae={key:0,class:"text-sm text-black"},De={class:"font-medium"},je={class:"font-medium"},Ee={class:"font-medium"},He={class:"flex items-center gap-1"},Se={class:"flex flex-col items-center text-center"},Ve={class:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-red-100"},Fe={class:"mt-2 text-gray-600"},Ie={class:"font-semibold"},Ne={key:0,class:"fixed top-5 right-5 z-50"},Pe={class:"flex items-center gap-4 rounded-lg bg-green-600 p-4 text-white shadow-lg"},ze={class:"font-semibold"},Ye=P({layout:G,__name:"Index",props:{achievements:{},filters:{}},setup(m){const p=m,f=c(p.filters.search||""),x=c(p.filters.category||"");T([f,x],J.debounce(()=>{$.get(route("admin.achievements.index"),{search:f.value,category:x.value},{preserveState:!0,replace:!0})},300));const g=c(!1),u=c(null),H=s=>{u.value=s,g.value=!0},b=()=>{g.value=!1,u.value=null},S=()=>{u.value&&$.delete(route("admin.achievements.destroy",u.value.id),{onSuccess:()=>b()})},V=z(),y=c(!1),C=c(""),F=K(()=>V.props.flash?.success);T(F,s=>{s&&(C.value=s,y.value=!0,setTimeout(()=>{y.value=!1},3e3))},{immediate:!0});const h=c(!1),M=L({file:null}),I=()=>{document.getElementById("import-file-input").click()},N=s=>{const t=s.target;t.files&&t.files.length>0&&(M.file=t.files[0],M.post(route("admin.achievements.import")))};return(s,t)=>(n(),i("div",null,[e("div",le,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-black"},"Kelola Daftar Prestasi"),e("p",{class:"mt-1 text-black"},[l("Manajemen daftar prestasi mahasiswa untuk website Fakultas Sains dan Teknologi "),e("br"),l(" Institut Teknologi Kalimantan")])],-1)),e("div",re,[e("div",ne,[e("button",{onClick:t[0]||(t[0]=a=>h.value=!h.value),class:"flex items-center gap-2 rounded-lg bg-white px-4 py-2 text-sm font-semibold text-black border border-gray-300 shadow-sm hover:bg-gray-50"},[o(r(ae),{class:"h-5 w-5"}),t[5]||(t[5]=l(" Ekspor ",-1)),o(r(oe),{class:"h-4 w-4"})]),h.value?(n(),i("div",{key:0,onClick:t[1]||(t[1]=a=>h.value=!1),class:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10"},[e("div",ie,[e("a",{href:s.route("admin.achievements.export",{format:"xlsx"}),class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"},"Excel (.xlsx)",8,de),e("a",{href:s.route("admin.achievements.export",{format:"csv"}),class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"},"CSV (.csv)",8,ce),e("a",{href:s.route("admin.achievements.export",{format:"pdf"}),class:"block px-4 py-2 text-sm text-black hover:bg-gray-100"},"PDF (.pdf)",8,pe)])])):v("",!0)]),e("form",{onSubmit:t[2]||(t[2]=A(()=>{},["prevent"]))},[e("input",{type:"file",id:"import-file-input",onChange:N,class:"hidden",accept:".xlsx, .csv"},null,32),e("button",{onClick:I,type:"button",class:"flex items-center gap-2 rounded-lg bg-white px-4 py-2 text-sm font-semibold text-black border border-gray-300 shadow-sm hover:bg-gray-50"},[o(r(se),{class:"h-5 w-5"}),t[6]||(t[6]=l(" Impor ",-1))])],32),o(r(k),{href:s.route("admin.achievements.create"),class:"flex items-center gap-2 rounded-lg bg-[#4682A9] px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-opacity-90"},{default:w(()=>[o(r(Q),{class:"h-5 w-5"}),t[7]||(t[7]=l(" Tambah Prestasi ",-1))]),_:1},8,["href"])])]),e("div",ue,[e("div",me,[o(r(R),{class:"pointer-events-none absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-400"}),D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>f.value=a),type:"text",placeholder:"Cari daftar prestasi",class:"w-full rounded-lg border-gray-300 py-3 pl-11 pr-4 bg-white shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[O,f.value]])]),e("div",fe,[o(r(W),{class:"pointer-events-none absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 text-gray-500"}),D(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>x.value=a),class:"w-full rounded-lg border border-gray-300 bg-white py-3 pl-11 pr-10 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[...t[9]||(t[9]=[e("option",{value:""},"Semua Kategori",-1),e("option",{value:"Akademik"},"Akademik",-1),e("option",{value:"Non-Akademik"},"Non-Akademik",-1)])],512),[[U,x.value]])])]),e("div",xe,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-black mb-4"},"Daftar Prestasi",-1)),e("div",ge,[e("table",he,[t[14]||(t[14]=e("thead",{class:"bg-[#CBDCEB]"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-black"},"Nama Mahasiswa"),e("th",{class:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-black"},"Capaian Prestasi"),e("th",{class:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-black w-40"},"Kategori"),e("th",{class:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-black w-40"},"Tingkat"),e("th",{class:"px-6 py-4 text-center text-xs font-bold uppercase tracking-wider text-black w-24"},"Tahun"),e("th",{class:"px-6 py-4 text-left text-xs font-bold uppercase tracking-wider text-black w-32"},"Aksi")])],-1)),e("tbody",ve,[s.achievements.data.length>0?(n(!0),i(j,{key:0},E(s.achievements.data,a=>(n(),i("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",be,d(a.student_name),1),e("td",ye,d(a.achievement_name),1),e("td",we,[e("span",{class:_(["rounded-full px-3 py-1 text-xs font-medium",a.category==="Akademik"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},d(a.category),3)]),e("td",ke,d(a.level),1),e("td",_e,d(a.year),1),e("td",Ce,[e("div",Me,[o(r(k),{href:s.route("admin.achievements.edit",a.id),class:"flex items-center gap-1 text-[#4682A9] hover:opacity-80"},{default:w(()=>[o(r(te),{class:"h-4 w-4"}),t[10]||(t[10]=l(" Edit ",-1))]),_:2},1032,["href"]),t[12]||(t[12]=e("span",{class:"text-gray-300"},"|",-1)),e("button",{onClick:B=>H(a),type:"button",class:"flex items-center gap-1 text-[#DC645E] hover:opacity-80"},[o(r(ee),{class:"h-4 w-4"}),t[11]||(t[11]=l(" Hapus ",-1))],8,Be)])])]))),128)):(n(),i("tr",Te,[...t[13]||(t[13]=[e("td",{colspan:"6",class:"text-center py-4 text-gray-500"},"Belum ada data prestasi.",-1)])]))])])]),e("div",$e,[s.achievements.total>0?(n(),i("p",Ae,[t[15]||(t[15]=l(" Menampilkan ",-1)),e("span",De,d(s.achievements.from),1),t[16]||(t[16]=l(" sampai ",-1)),e("span",je,d(s.achievements.to),1),t[17]||(t[17]=l(" dari ",-1)),e("span",Ee,d(s.achievements.total),1),t[18]||(t[18]=l(" hasil ",-1))])):v("",!0),e("div",He,[(n(!0),i(j,null,E(s.achievements.links,(a,B)=>(n(),Y(r(k),{key:B,href:a.url??"#",innerHTML:a.label,class:_(["px-3 py-1 text-sm rounded border border-gray-300",a.active?"bg-[#4682A9] text-white":"bg-[#CBDCEB]  text-gray-800 hover:bg-gray-100",a.url?"":"text-gray-400 cursor-not-allowed"])},null,8,["href","innerHTML","class"]))),128))])])]),g.value?(n(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity",onClick:A(b,["self"])},[e("div",{class:_(["w-full max-w-md rounded-lg bg-white p-8 shadow-2xl transition-transform transform scale-95",{"scale-100":g.value}])},[e("div",Se,[e("div",Ve,[o(r(X),{class:"h-10 w-10 text-red-500"})]),t[23]||(t[23]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Hapus Prestasi",-1)),e("p",Fe,[t[20]||(t[20]=l(" Apakah Anda yakin ingin menghapus prestasi oleh ",-1)),t[21]||(t[21]=e("br",null,null,-1)),e("span",Ie,'"'+d(u.value?.student_name)+'"',1),t[22]||(t[22]=l("? Aksi ini tidak dapat dibatalkan. ",-1))])]),e("div",{class:"mt-8 flex justify-center gap-4"},[e("button",{onClick:b,class:"rounded-lg bg-gray-200 px-6 py-2 font-semibold text-gray-800 hover:bg-gray-300"}," Batal "),e("button",{onClick:S,class:"rounded-lg bg-red-600 px-6 py-2 font-semibold text-white hover:bg-red-700"}," Ya, Hapus ")])],2)])):v("",!0),o(q,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:w(()=>[y.value?(n(),i("div",Ne,[e("div",Pe,[o(r(Z),{class:"h-8 w-8"}),e("p",ze,d(C.value),1)])])):v("",!0)]),_:1})]))}});export{Ye as default};
