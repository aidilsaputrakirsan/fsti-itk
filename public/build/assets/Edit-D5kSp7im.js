import{c as d,o as a,a as e,d as V,u as L,r as c,A as P,B as j,z as T,w as z,b as f,e as v,v as k,f as s,t as p,i as g,n as i,g as H,k as R,j as $,l as I,C as K,D as S,F as E}from"./app-B26E56ET.js";import{_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CnoWgKJS.js";import{u as F,i as O,a as D,b as N,c as G,r as J,d as Q,e as W,E as X}from"./index-B7pUa-mG.js";import{r as Y,a as Z}from"./PaperClipIcon-Dkcuzmb5.js";import{r as _}from"./PencilSquareIcon-DlzesHkv.js";function tt(y,u){return a(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const et={class:"bg-white shadow-sm p-8 rounded-lg"},st={class:"grid grid-cols-1 md:grid-cols-[150px_1fr] gap-x-8 gap-y-8"},ot={key:0,class:"mt-2 text-sm text-red-600"},lt={key:0,class:"mt-2 text-sm text-red-600"},rt={key:0,class:"flex items-center flex-wrap gap-1 border border-b-0 border-gray-300 rounded-t-md p-2 bg-gray-50 text-gray-800"},nt=["disabled"],it=["disabled"],at={key:1,class:"mt-2 text-sm text-red-600"},dt={key:0,class:"mt-2 text-sm text-red-600"},ut={key:0,class:"mt-2 text-sm text-red-600"},bt={key:0,class:"mb-4"},vt=["src"],gt={class:"relative flex items-center w-full rounded-md border border-gray-300 bg-white shadow-sm px-4 py-2"},pt={key:1,class:"mt-2 text-sm text-red-600"},mt={class:"mt-12 flex items-center justify-between"},xt={class:"flex gap-4"},ft=["disabled"],wt=["src"],zt=V({layout:q,__name:"Edit",props:{post:{}},setup(y){const u=y,o=L({_method:"PUT",title:u.post.title,excerpt:u.post.excerpt,content:u.post.content,category:u.post.category,tags:u.post.tags,status:u.post.status,image:null}),r=F({content:u.post.content,extensions:[O,D,N.configure({openOnClick:!1}),G.configure({types:["heading","paragraph"]})],onUpdate:({editor:b})=>{o.content=b.getHTML()},editorProps:{attributes:{class:"prose max-w-none w-full rounded-b-md border border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-4 min-h-[250px]"}}}),m=c(u.post.image_url??null),x=c(null),w=c(!1);function B(b){const t=b.target;if(t.files&&t.files[0]){const l=t.files[0];o.image=l,x.value&&URL.revokeObjectURL(x.value);const C=URL.createObjectURL(l);m.value=C,x.value=C}}const n=(b,t)=>{if(!r.value)return;r.value.chain().focus()[b](t).run()},M=()=>{if(!r.value)return;const b=r.value.getAttributes("link").href,t=window.prompt("URL",b);if(t!==null){if(t===""){r.value.chain().focus().extendMarkRange("link").unsetLink().run();return}r.value.chain().focus().extendMarkRange("link").setLink({href:t}).run()}},A=()=>{m.value&&(w.value=!0)},h=()=>{w.value=!1};P(()=>{r.value?.destroy()}),j(()=>{x.value&&URL.revokeObjectURL(x.value)});const U=()=>{o.post(route("admin.posts.update",u.post.id))};return(b,t)=>(a(),d(E,null,[e("div",null,[t[48]||(t[48]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-black"},"Edit Berita"),e("p",{class:"mt-1 text-black"},"Perbarui detail berita untuk website Fakultas Sains dan Teknologi.")],-1)),e("div",et,[e("form",{onSubmit:z(U,["prevent"])},[e("div",st,[t[39]||(t[39]=e("label",{for:"title",class:"pt-2 text-sm font-semibold text-black"},"Judul Berita *",-1)),e("div",null,[f(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=l=>s(o).title=l),class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[k,s(o).title]]),s(o).errors.title?(a(),d("p",ot,p(s(o).errors.title),1)):v("",!0)]),t[40]||(t[40]=e("label",{for:"excerpt",class:"pt-2 text-sm font-semibold text-black"},"Ringkasan Berita *",-1)),e("div",null,[f(e("textarea",{id:"excerpt","onUpdate:modelValue":t[1]||(t[1]=l=>s(o).excerpt=l),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},null,512),[[k,s(o).excerpt]]),s(o).errors.excerpt?(a(),d("p",lt,p(s(o).errors.excerpt),1)):v("",!0)]),t[41]||(t[41]=e("label",{for:"content",class:"pt-2 text-sm font-semibold text-black"},"Isi Konten Berita *",-1)),e("div",null,[s(r)?(a(),d("div",rt,[e("button",{onClick:t[2]||(t[2]=l=>n("toggleBold")),type:"button",class:i([{"is-active":s(r).isActive("bold")},"toolbar-button"])},[...t[20]||(t[20]=[e("span",{class:"font-bold"},"B",-1)])],2),e("button",{onClick:t[3]||(t[3]=l=>n("toggleItalic")),type:"button",class:i([{"is-active":s(r).isActive("italic")},"toolbar-button"])},[...t[21]||(t[21]=[e("span",{class:"italic"},"I",-1)])],2),e("button",{onClick:t[4]||(t[4]=l=>n("toggleUnderline")),type:"button",class:i([{"is-active":s(r).isActive("underline")},"toolbar-button"])},[...t[22]||(t[22]=[e("span",{class:"underline"},"U",-1)])],2),e("button",{onClick:t[5]||(t[5]=l=>n("toggleStrike")),type:"button",class:i([{"is-active":s(r).isActive("strike")},"toolbar-button"])},[...t[23]||(t[23]=[e("span",{class:"line-through"},"S",-1)])],2),e("button",{onClick:M,type:"button",class:i([{"is-active":s(r).isActive("link")},"toolbar-button"])},[g(s(J),{class:"h-5 w-5"})],2),t[32]||(t[32]=e("div",{class:"toolbar-divider"},null,-1)),e("button",{onClick:t[6]||(t[6]=l=>n("toggleHeading",{level:2})),type:"button",class:i([{"is-active":s(r).isActive("heading",{level:2})},"toolbar-button"])},[...t[24]||(t[24]=[e("span",{class:"text-md font-bold"},"H2",-1)])],2),e("button",{onClick:t[7]||(t[7]=l=>n("toggleHeading",{level:3})),type:"button",class:i([{"is-active":s(r).isActive("heading",{level:3})},"toolbar-button"])},[...t[25]||(t[25]=[e("span",{class:"text-sm font-bold"},"H3",-1)])],2),e("button",{onClick:t[8]||(t[8]=l=>n("toggleBlockquote")),type:"button",class:i([{"is-active":s(r).isActive("blockquote")},"toolbar-button"])},[...t[26]||(t[26]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M9.983 3v7.391c0 2.908-2.353 5.261-5.261 5.261v3.65c4.894 0 8.87-3.977 8.87-8.87V3h-3.609zM21.017 3v7.391c0 2.908-2.353 5.261-5.261 5.261v3.65c4.894 0 8.87-3.977 8.87-8.87V3h-3.609z"})],-1)])],2),t[33]||(t[33]=e("div",{class:"toolbar-divider"},null,-1)),e("button",{onClick:t[9]||(t[9]=l=>n("toggleBulletList")),type:"button",class:i([{"is-active":s(r).isActive("bulletList")},"toolbar-button"])},[...t[27]||(t[27]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4 4h2v2H4V4zm4 0h12v2H8V4zM4 11h2v2H4v-2zm4 0h12v2H8v-2zm-4 7h2v2H4v-2zm4 0h12v2H8v-2z"})],-1)])],2),e("button",{onClick:t[10]||(t[10]=l=>n("toggleOrderedList")),type:"button",class:i([{"is-active":s(r).isActive("orderedList")},"toolbar-button"])},[...t[28]||(t[28]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M5.83 4.242H8v2H4.5V4.742l1.33-.5zM4.5 11h3.5v2H4.5v-2zm0 7h3.5v2H4.5v-2zM9.5 4h10v2h-10V4zm0 7h10v2h-10v-2zm0 7h10v2h-10v-2zM4.03 4.9v.8L2.5 7H4.5V9H1V4h1.5v.9l1.53-1.8z"})],-1)])],2),t[34]||(t[34]=e("div",{class:"toolbar-divider"},null,-1)),e("button",{onClick:t[11]||(t[11]=l=>n("setTextAlign","left")),type:"button",class:i([{"is-active":s(r).isActive({textAlign:"left"})},"toolbar-button"])},[...t[29]||(t[29]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4h18v2H3V4zm0 7h12v2H3v-2zm0 7h18v2H3v-2z"})],-1)])],2),e("button",{onClick:t[12]||(t[12]=l=>n("setTextAlign","center")),type:"button",class:i([{"is-active":s(r).isActive({textAlign:"center"})},"toolbar-button"])},[...t[30]||(t[30]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4h18v2H3V4zm3 7h12v2H6v-2zm-3 7h18v2H3v-2z"})],-1)])],2),e("button",{onClick:t[13]||(t[13]=l=>n("setTextAlign","right")),type:"button",class:i([{"is-active":s(r).isActive({textAlign:"right"})},"toolbar-button"])},[...t[31]||(t[31]=[e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M3 4h18v2H3V4zm9 7h9v2h-9v-2zm-9 7h18v2H3v-2z"})],-1)])],2),t[35]||(t[35]=e("div",{class:"toolbar-divider"},null,-1)),e("button",{onClick:t[14]||(t[14]=l=>n("undo")),type:"button",disabled:!s(r).can().undo(),class:"toolbar-button"},[g(s(Q),{class:"h-5 w-5"})],8,nt),e("button",{onClick:t[15]||(t[15]=l=>n("redo")),type:"button",disabled:!s(r).can().redo(),class:"toolbar-button"},[g(s(W),{class:"h-5 w-5"})],8,it)])):v("",!0),g(s(X),{editor:s(r)},null,8,["editor"]),s(o).errors.content?(a(),d("p",at,p(s(o).errors.content),1)):v("",!0)]),t[42]||(t[42]=e("label",{for:"category",class:"pt-2 text-sm font-semibold text-black"},"Kategori *",-1)),e("div",null,[f(e("select",{id:"category","onUpdate:modelValue":t[16]||(t[16]=l=>s(o).category=l),class:"block w-full rounded-md border-gray-300 shadow-sm",required:""},[...t[36]||(t[36]=[e("option",{value:"",disabled:""},"Pilih kategori",-1),e("option",null,"Prestasi",-1),e("option",null,"Liputan Kegiatan",-1),e("option",null,"Kerjasama",-1)])],512),[[H,s(o).category]]),s(o).errors.category?(a(),d("p",dt,p(s(o).errors.category),1)):v("",!0)]),t[43]||(t[43]=e("label",{for:"tags",class:"pt-2 text-sm font-semibold text-black"},"Tags",-1)),e("div",null,[f(e("textarea",{id:"tags","onUpdate:modelValue":t[17]||(t[17]=l=>s(o).tags=l),rows:"2",class:"block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[k,s(o).tags]]),s(o).errors.tags?(a(),d("p",ut,p(s(o).errors.tags),1)):v("",!0)]),t[44]||(t[44]=e("label",{for:"status",class:"pt-2 text-sm font-semibold text-black"},"Status *",-1)),e("div",null,[f(e("select",{id:"status","onUpdate:modelValue":t[18]||(t[18]=l=>s(o).status=l),class:"block w-full rounded-md border-gray-300 shadow-sm"},[...t[37]||(t[37]=[e("option",null,"Draft",-1),e("option",null,"Terbitkan",-1)])],512),[[H,s(o).status]])]),t[45]||(t[45]=e("label",{for:"image",class:"pt-2 text-sm font-semibold text-black"},"Gambar",-1)),e("div",null,[m.value?(a(),d("div",bt,[e("img",{src:m.value,alt:"Preview Gambar",class:"w-48 h-auto rounded-lg object-cover cursor-pointer hover:opacity-80 transition-opacity",onClick:A},null,8,vt)])):v("",!0),e("div",gt,[g(s(Y),{class:"h-5 w-5 text-gray-400"}),e("span",{class:i(["ml-3 text-sm",{"text-gray-400":!s(o).image,"text-black":s(o).image}])},p(s(o).image?s(o).image.name:"Pilih gambar baru (opsional)"),3),e("input",{type:"file",id:"image",onChange:B,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,32)]),t[38]||(t[38]=e("p",{class:"mt-1 text-xs text-gray-500"},"Kosongkan jika tidak ingin mengubah gambar.",-1)),s(o).errors.image?(a(),d("p",pt,p(s(o).errors.image),1)):v("",!0)])]),e("div",mt,[g(s(I),{href:b.route("admin.posts.index"),class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50"},{default:R(()=>[g(s(Z),{class:"h-5 w-5"}),t[46]||(t[46]=$(" Kembali ",-1))]),_:1},8,["href"]),e("div",xt,[e("button",{type:"submit",disabled:s(o).processing,class:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 disabled:opacity-50"},[g(s(_),{class:"h-5 w-5"}),t[47]||(t[47]=$(" Perbarui Berita ",-1))],8,ft)])])],32)])]),(a(),T(S,{to:"body"},[w.value?(a(),d("div",{key:0,onKeydown:K(h,["escape"]),class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-75 transition-opacity"},[e("div",{class:"relative w-full max-w-4xl max-h-[90vh]",onClick:t[19]||(t[19]=z(()=>{},["stop"]))},[e("img",{src:m.value,alt:"Preview Gambar Penuh",class:"w-full h-full object-contain rounded-lg"},null,8,wt),e("button",{onClick:h,class:"absolute -top-2 -right-2 bg-white rounded-full p-2 text-gray-800 hover:bg-gray-200 transition shadow-lg"},[g(s(tt),{class:"h-6 w-6"})])])],32)):v("",!0)]))],64))}});export{zt as default};
